<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PJOK PRO - Atletik Zone</title>
    
    <!-- Tailwind CSS (CDN) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#2563EB',   
                        secondary: '#F59E0B', 
                        fun: '#8B5CF6',       
                    },
                    fontFamily: {
                        sans: ['Poppins', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <style>
        .fade-in { animation: fadeIn 0.6s cubic-bezier(0.22, 1, 0.36, 1); }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); scale: 0.95; } to { opacity: 1; transform: translateY(0); scale: 1; } }
        
        .tab-active { background-color: #2563EB; color: white; border-bottom: 4px solid #F59E0B; font-weight: 700; }
        .tab-inactive { background-color: white; color: #9CA3AF; font-weight: 500; }
        
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #8B5CF6;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* Modal Styles */
        .modal { transition: opacity 0.3s ease; }
        .modal-content { animation: slideIn 0.3s ease; }
        @keyframes slideIn { from { transform: translateY(-50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        
        /* Smooth Scroll */
        html { scroll-behavior: smooth; }
    </style>
</head>
<body class="bg-slate-50 font-sans text-gray-800 antialiased min-h-screen flex justify-center">

    <div class="w-full max-w-lg bg-white shadow-2xl min-h-screen relative flex flex-col border-x border-gray-200">

        <!-- ================= HERO SECTION ================= -->
        <header id="top-header" class="relative h-72 overflow-hidden rounded-b-[40px] shadow-xl z-10 group bg-gradient-to-br from-blue-900 to-indigo-900">
            <img src="https://images.unsplash.com/photo-1461896836934-ffe607ba8211?q=80&w=1000&auto=format&fit=crop" 
                 alt="Sports Background" 
                 class="absolute w-full h-full object-cover transition-transform duration-1000 group-hover:scale-110 opacity-60 mix-blend-overlay"
                 onerror="this.style.display='none'"> 

            <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"></div>
            
            <div class="absolute bottom-0 left-0 p-6 text-white w-full">
                <div class="bg-white/20 backdrop-blur-md px-3 py-1 rounded-full inline-flex items-center gap-2 mb-2 border border-white/30">
                    <span class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></span>
                    <p class="font-bold text-[10px] uppercase tracking-wider">PJOK Fase E ‚Ä¢ Kelas X</p>
                </div>
                <h1 class="text-3xl font-extrabold leading-tight mb-1">Atletik Zone <br><span class="text-yellow-400">Run Fast! ‚ö°</span></h1>
                
                <!-- IDENTITAS GURU & TOMBOL ADMIN -->
                <div class="flex items-center justify-between mt-4 bg-white/10 p-3 rounded-2xl border border-white/10 backdrop-blur-sm hover:bg-white/20 transition">
                    <div class="flex items-center gap-3">
                        <div class="bg-white p-1 rounded-xl shadow-lg h-12 w-12 flex items-center justify-center overflow-hidden">
                            <!-- LOGO SEKOLAH -->
                            <img src="1000412979.png" alt="Logo" class="h-full w-full object-contain" 
                                 onerror="this.style.display='none'; this.nextElementSibling.classList.remove('hidden')">
                            <i class="fas fa-user-tie text-indigo-500 text-xl hidden"></i>
                        </div>
                        <div class="flex flex-col">
                            <span class="text-[10px] text-gray-300 uppercase tracking-widest">Coach / Guru Mapel</span>
                            <span class="text-sm font-bold text-white leading-tight">M. Nanda S.N., S.Kom.</span>
                        </div>
                    </div>
                    <!-- Tombol Gembok (Login Guru) -->
                    <button onclick="openAdminModal()" class="text-white/60 hover:text-white transition-colors p-2 rounded-full">
                        <i class="fas fa-lock"></i>
                    </button>
                </div>
            </div>
        </header>

        <!-- ================= IDENTITAS SISWA ================= -->
        <section id="identity-section" class="flex-grow p-8 flex flex-col justify-center fade-in">
            <div class="text-center mb-8">
                <div class="inline-block p-4 rounded-full bg-blue-50 text-blue-600 mb-3 text-3xl animate-bounce shadow-sm">üëã</div>
                <h2 class="text-2xl font-bold text-gray-800">Siap Cetak Rekor?</h2>
                <p class="text-gray-500 text-sm mt-1">Isi presensi dulu sebelum masuk ke lapangan!</p>
            </div>

            <form id="identity-form" class="space-y-5">
                <div class="space-y-2">
                    <label class="text-xs font-bold text-gray-500 uppercase ml-1">Nama Lengkap</label>
                    <input type="text" id="student-name" class="w-full px-5 py-4 rounded-2xl bg-white border-2 border-gray-100 focus:border-primary focus:ring-4 focus:ring-blue-50 transition-all outline-none font-medium shadow-sm" placeholder="Tulis nama lengkap..." required>
                </div>
                
                <div class="grid grid-cols-2 gap-4">
                    <div class="space-y-2">
                        <label class="text-xs font-bold text-gray-500 uppercase ml-1">Kelas</label>
                        <select id="student-class" class="w-full px-5 py-4 rounded-2xl bg-white border-2 border-gray-100 focus:border-primary focus:ring-4 focus:ring-blue-50 transition-all outline-none font-medium appearance-none shadow-sm">
                            <option>X TKJ A</option>
                            <option>X TKJ B</option>
                            <option>X TBSM</option>
                        </select>
                    </div>
                    <div class="space-y-2">
                        <label class="text-xs font-bold text-gray-500 uppercase ml-1">No. Absen</label>
                        <input type="number" id="student-number" class="w-full px-5 py-4 rounded-2xl bg-white border-2 border-gray-100 focus:border-primary focus:ring-4 focus:ring-blue-50 transition-all outline-none font-medium shadow-sm" placeholder="00" required>
                    </div>
                </div>

                <button type="submit" class="w-full bg-gray-900 text-white font-bold py-4 rounded-2xl shadow-xl hover:bg-black transform active:scale-95 transition-all mt-6 flex justify-center items-center gap-2 group border-b-4 border-gray-700">
                    <span>Gaspol Belajar!</span> 
                    <i class="fas fa-arrow-right group-hover:translate-x-1 transition-transform text-yellow-400"></i>
                </button>
            </form>
        </section>

        <!-- ================= KONTEN SISWA (MATERI) ================= -->
        <main id="main-content" class="hidden flex-col flex-grow bg-slate-50">
            <!-- Tab Navigasi -->
            <div class="flex text-sm text-center bg-white shadow-sm sticky top-0 z-30 mx-4 mt-4 rounded-2xl overflow-hidden p-1 gap-1" id="tabs">
                <button onclick="switchTab('short')" id="tab-short" class="flex-1 py-3 rounded-xl transition-all duration-300">Sprint üèÉüí®</button>
                <button onclick="switchTab('middle')" id="tab-middle" class="flex-1 py-3 rounded-xl transition-all duration-300">Menengah üî•</button>
                <button onclick="switchTab('long')" id="tab-long" class="flex-1 py-3 rounded-xl transition-all duration-300">Jauh üîã</button>
            </div>

            <div class="p-6 space-y-8 pb-32">
                <!-- 1. VIDEO & MATERI -->
                <section id="material-section" class="fade-in">
                    <div class="flex items-center gap-3 mb-4">
                        <div class="bg-blue-600 text-white p-2 rounded-lg shadow-lg shadow-blue-500/30"><i class="fas fa-play"></i></div>
                        <h2 class="text-xl font-extrabold text-gray-800" id="material-title">Judul Materi</h2>
                    </div>
                    
                    <!-- Video Embed -->
                    <div class="bg-gray-900 rounded-3xl overflow-hidden shadow-2xl mb-4 aspect-video relative group ring-4 ring-white">
                        <div class="loader absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-0"></div>
                        <iframe id="video-embed" class="w-full h-full relative z-10" src="" title="Materi Video" frameborder="0" allowfullscreen></iframe>
                    </div>

                    <!-- Keterangan Video (Deskripsi) -->
                    <div class="bg-blue-50 p-4 rounded-2xl border border-blue-100 text-sm text-gray-700 leading-relaxed shadow-sm mb-6 flex gap-3">
                        <i class="fas fa-info-circle text-blue-500 mt-1"></i>
                        <p id="video-desc" class="italic font-medium"></p>
                    </div>

                    <!-- SAFETY CORNER (BARU) -->
                    <div id="safety-section" class="bg-red-50 p-4 rounded-2xl border border-red-100 mb-6 flex items-start gap-3">
                        <div class="bg-red-100 text-red-600 p-2 rounded-lg shrink-0"><i class="fas fa-exclamation-triangle"></i></div>
                        <div>
                            <h4 class="font-bold text-red-700 text-sm mb-1">Safety First (Keselamatan):</h4>
                            <p id="safety-text" class="text-xs text-red-600 leading-relaxed"></p>
                        </div>
                    </div>

                    <!-- Poin Penting (Cheat Sheet) -->
                    <div class="bg-white p-6 rounded-3xl shadow-sm border border-gray-200 relative overflow-hidden">
                        <div class="absolute top-0 right-0 w-20 h-20 bg-yellow-100 rounded-bl-[100px] -mr-4 -mt-4 z-0"></div>
                        <h4 class="font-bold text-gray-800 mb-4 relative z-10 flex items-center gap-2">
                            <i class="fas fa-lightbulb text-yellow-500"></i> Cheat Sheet Materi:
                        </h4>
                        <ul class="space-y-3 relative z-10" id="key-points"></ul>
                    </div>
                </section>

                <!-- 2. GLOSARIUM (KAMUS ISTILAH) -->
                <section class="fade-in bg-white p-5 rounded-3xl shadow-sm border border-gray-200">
                    <div class="flex items-center gap-2 mb-4">
                        <div class="bg-purple-100 text-purple-600 p-2 rounded-lg"><i class="fas fa-book-open"></i></div>
                        <h3 class="font-bold text-gray-800">Kamus Istilah (Glosarium)</h3>
                    </div>
                    <div class="grid gap-3 text-sm" id="glossary-container">
                        <!-- Diisi via JS -->
                    </div>
                </section>

                <!-- 3. MISI PRAKTIK -->
                <section class="fade-in">
                    <div class="bg-gradient-to-br from-violet-600 to-indigo-600 rounded-[30px] p-6 text-white shadow-2xl shadow-indigo-500/40 relative overflow-hidden">
                        <i class="fas fa-trophy absolute -bottom-4 -right-4 text-9xl text-white/10 rotate-12"></i>
                        <div class="flex items-center gap-3 mb-5 relative z-10">
                            <div class="bg-white/20 p-2.5 rounded-xl backdrop-blur-md border border-white/20"><i class="fas fa-gamepad text-2xl text-yellow-300"></i></div>
                            <div>
                                <h3 class="font-bold text-xl">CHALLENGE LAPANGAN!</h3>
                                <p class="text-xs text-indigo-200 font-medium">Selesaikan misi ini bareng temenmu</p>
                            </div>
                        </div>
                        
                        <!-- Konten Panduan -->
                        <div id="practice-guide-content" class="bg-black/20 backdrop-blur-sm rounded-2xl p-5 text-sm leading-relaxed border border-white/10 mb-5 relative z-10"></div>
                        
                        <!-- Input Cerita -->
                        <div class="bg-white p-1 rounded-2xl shadow-lg relative z-10">
                            <div class="bg-gray-50 rounded-xl p-4 border border-gray-100">
                                <label class="block text-xs font-bold text-indigo-500 uppercase mb-2 flex items-center gap-1"><i class="fas fa-bullhorn"></i> Story Time (Ceritain Dong!)</label>
                                <textarea id="input-cerita" class="w-full bg-transparent text-gray-700 text-sm h-16 outline-none resize-none placeholder-gray-400" placeholder="Gimana rasanya? Tim kamu menang gak?"></textarea>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 4. P5 CHECKLIST -->
                <section class="fade-in bg-white p-6 rounded-3xl shadow-sm border border-gray-200">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="font-bold text-gray-800 text-lg">Level Up Karakter! ‚≠ê</h3>
                        <span class="text-xs bg-yellow-100 text-yellow-700 px-2 py-1 rounded-lg font-bold">P5 Profile</span>
                    </div>
                    <p class="text-xs text-gray-500 mb-3">Centang sikap yang kamu rasakan:</p>
                    <div class="grid grid-cols-1 gap-3" id="p5-checklist-container"></div>
                </section>

                <!-- 5. REFLEKSI DIRI -->
                <section class="fade-in bg-indigo-50 p-6 rounded-3xl border-2 border-dashed border-indigo-200">
                    <div class="flex items-center gap-2 mb-3">
                        <i class="fas fa-comment-dots text-indigo-500 text-xl"></i>
                        <h3 class="font-bold text-gray-800">Refleksi Diri</h3>
                    </div>
                    <p class="text-xs text-gray-500 mb-2">Apa kesulitan terbesarmu hari ini?</p>
                    <textarea id="input-refleksi" class="w-full p-4 rounded-xl bg-white border border-indigo-100 focus:ring-2 focus:ring-indigo-300 outline-none text-sm h-24 resize-none shadow-sm" placeholder="Tulis refleksimu di sini..."></textarea>
                </section>

                <!-- 6. QUIZ -->
                <section class="fade-in">
                    <div class="flex items-center gap-3 mb-5">
                        <div class="bg-green-500 text-white p-2 rounded-lg shadow-lg shadow-green-500/30"><i class="fas fa-brain"></i></div>
                        <h2 class="text-xl font-extrabold text-gray-800">Quiz Time! üß†</h2>
                    </div>
                    <div id="quiz-container" class="space-y-5"></div>
                </section>

                <!-- TOMBOL KIRIM -->
                <div class="pt-2 pb-6">
                    <button onclick="submitLKPD()" class="w-full bg-gray-900 text-white font-bold py-5 rounded-[20px] shadow-2xl transform active:scale-95 transition-all flex justify-between items-center px-6 group border-b-4 border-gray-700 hover:bg-black">
                        <div class="flex flex-col items-start">
                            <span class="text-[10px] text-gray-400 font-medium uppercase tracking-wider">Misi Selesai?</span>
                            <span class="text-lg">Lapor ke Pak Nanda</span>
                        </div>
                        <div class="bg-green-500 text-white w-12 h-12 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform shadow-lg shadow-green-500/40"><i class="fab fa-whatsapp text-2xl"></i></div>
                    </button>
                </div>
            </div>
        </main>

        <!-- ================= DASHBOARD GURU (FULL FEATURES) ================= -->
        <div id="teacher-dashboard" class="hidden fixed inset-0 bg-gray-100 z-50 overflow-y-auto">
            <!-- Sticky Header -->
            <div class="bg-gray-900 text-white p-5 sticky top-0 z-50 shadow-lg">
                <div class="flex justify-between items-center max-w-2xl mx-auto w-full">
                    <div>
                        <p class="text-[10px] text-gray-400 uppercase tracking-widest">Administrator Mode</p>
                        <h2 class="text-lg font-bold text-yellow-400"><i class="fas fa-chalkboard-teacher mr-2"></i>Dashboard Pak Nanda</h2>
                    </div>
                    <button onclick="closeDashboard()" class="bg-gray-800 p-2 rounded-full hover:bg-gray-700 transition"><i class="fas fa-times"></i></button>
                </div>
            </div>

            <div class="p-5 space-y-6 max-w-2xl mx-auto pb-24">
                
                <!-- 1. BANK PERTANYAAN PEMANTIK (3 NOMOR) -->
                <div class="bg-white p-6 rounded-3xl shadow-sm border border-gray-200">
                    <h3 class="font-bold text-indigo-600 mb-4 border-b pb-2"><i class="fas fa-question-circle mr-2"></i>Pertanyaan Pemantik</h3>
                    
                    <div class="space-y-6">
                        <!-- SPRINT -->
                        <div class="bg-indigo-50 p-4 rounded-2xl border border-indigo-100">
                            <div class="flex items-center gap-2 mb-2">
                                <span class="bg-indigo-200 text-indigo-700 text-xs px-2 py-1 rounded font-bold">Sprint</span>
                                <h4 class="font-bold text-indigo-800 text-sm">Analisis Otot</h4>
                            </div>
                            <p class="text-sm text-gray-700 italic mb-3">"Mengapa badan pelari sprint (100m) sangat berotot besar, sedangkan pelari maraton cenderung kurus kering?"</p>
                            <button onclick="toggleAnswer('ans1')" class="text-xs bg-indigo-600 text-white px-3 py-2 rounded-lg hover:bg-indigo-700 transition w-full text-left flex justify-between items-center">
                                <span>Buka Kunci Jawaban</span> <i class="fas fa-chevron-down"></i>
                            </button>
                            <div id="ans1" class="hidden mt-2 p-3 bg-white rounded-lg border border-indigo-200 text-xs text-gray-600 leading-relaxed">
                                <strong>Poin Kunci:</strong> Sprint butuh <em>Power</em> (ledakan) yang dihasilkan oleh otot serat cepat (Fast Twitch) yang ukurannya besar (hipertrofi). Maraton butuh efisiensi hemat energi, otot besar justru membebani (boros oksigen).
                            </div>
                        </div>

                        <!-- MENENGAH -->
                        <div class="bg-orange-50 p-4 rounded-2xl border border-orange-100">
                            <div class="flex items-center gap-2 mb-2">
                                <span class="bg-orange-200 text-orange-700 text-xs px-2 py-1 rounded font-bold">800m</span>
                                <h4 class="font-bold text-orange-800 text-sm">Manajemen Energi</h4>
                            </div>
                            <p class="text-sm text-gray-700 italic mb-3">"Apa yang terjadi pada tubuh jika kamu lari sprint 100% dari garis start saat lomba 800 meter?"</p>
                            <button onclick="toggleAnswer('ans2')" class="text-xs bg-orange-600 text-white px-3 py-2 rounded-lg hover:bg-orange-700 transition w-full text-left flex justify-between items-center">
                                <span>Buka Kunci Jawaban</span> <i class="fas fa-chevron-down"></i>
                            </button>
                            <div id="ans2" class="hidden mt-2 p-3 bg-white rounded-lg border border-orange-200 text-xs text-gray-600 leading-relaxed">
                                <strong>Poin Kunci:</strong> Tubuh akan masuk fase anaerobik terlalu cepat -> Asam laktat menumpuk drastis -> Otot kaki terasa berat/terbakar -> Kehabisan tenaga ('bonk') di pertengahan lomba.
                            </div>
                        </div>

                        <!-- JAUH -->
                        <div class="bg-green-50 p-4 rounded-2xl border border-green-100">
                            <div class="flex items-center gap-2 mb-2">
                                <span class="bg-green-200 text-green-700 text-xs px-2 py-1 rounded font-bold">Jarak Jauh</span>
                                <h4 class="font-bold text-green-800 text-sm">Efisiensi Gerak</h4>
                            </div>
                            <p class="text-sm text-gray-700 italic mb-3">"Kenapa pelari jarak jauh langkahnya pendek-pendek (seperti menyeret kaki) dan tidak mengangkat lutut tinggi?"</p>
                            <button onclick="toggleAnswer('ans3')" class="text-xs bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 transition w-full text-left flex justify-between items-center">
                                <span>Buka Kunci Jawaban</span> <i class="fas fa-chevron-down"></i>
                            </button>
                            <div id="ans3" class="hidden mt-2 p-3 bg-white rounded-lg border border-green-200 text-xs text-gray-600 leading-relaxed">
                                <strong>Poin Kunci:</strong> Mengangkat lutut tinggi butuh banyak energi. Langkah pendek dan cepat (High Cadence) lebih hemat energi dan mengurangi benturan lutut saat mendarat.
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 2. TEKNIK PEMANASAN ABC RUNNING (DETAIL) -->
                <div class="bg-white p-6 rounded-3xl shadow-sm border border-gray-200">
                    <h3 class="font-bold text-red-600 mb-4 border-b pb-2"><i class="fas fa-fire-alt mr-2"></i>Panduan Pemanasan ABC Running</h3>
                    <p class="text-xs text-gray-500 mb-4">Drill ini wajib dilakukan sejauh 10-15 meter (2 repetisi) untuk memperbaiki teknik lari siswa.</p>

                    <div class="space-y-5">
                        <!-- A -->
                        <div class="flex gap-4">
                            <div class="bg-red-100 text-red-600 w-10 h-10 rounded-xl flex items-center justify-center font-bold text-lg shrink-0">A</div>
                            <div>
                                <h4 class="font-bold text-gray-800">Ankling (Jalan Jinjit Cepat)</h4>
                                <p class="text-xs text-gray-600 mt-1 leading-relaxed">
                                    Gerakan lari kecil dengan tumpuan ujung kaki. Lutut hampir lurus, fokus pada engkel yang aktif menekuk. Tujuannya melatih kekuatan pergelangan kaki.
                                </p>
                                <div class="mt-2 bg-gray-50 px-3 py-2 rounded-lg border-l-4 border-red-400">
                                    <p class="text-[10px] text-gray-500 uppercase font-bold">üì¢ Instruksi Guru:</p>
                                    <p class="text-xs font-bold text-gray-800 italic">"Mainkan ujung kakinya! Jangan napak tumit! Cepat!"</p>
                                </div>
                            </div>
                        </div>

                        <!-- B -->
                        <div class="flex gap-4">
                            <div class="bg-red-100 text-red-600 w-10 h-10 rounded-xl flex items-center justify-center font-bold text-lg shrink-0">B</div>
                            <div>
                                <h4 class="font-bold text-gray-800">High Knees (Angkat Paha)</h4>
                                <p class="text-xs text-gray-600 mt-1 leading-relaxed">
                                    Lari dengan mengangkat paha tinggi sejajar rata-rata air (90 derajat). Badan tetap tegak lurus, jangan condong ke belakang.
                                </p>
                                <div class="mt-2 bg-gray-50 px-3 py-2 rounded-lg border-l-4 border-red-400">
                                    <p class="text-[10px] text-gray-500 uppercase font-bold">üì¢ Instruksi Guru:</p>
                                    <p class="text-xs font-bold text-gray-800 italic">"Paha naik! Badan tegak! Jangan bungkuk!"</p>
                                </div>
                            </div>
                        </div>

                        <!-- C -->
                        <div class="flex gap-4">
                            <div class="bg-red-100 text-red-600 w-10 h-10 rounded-xl flex items-center justify-center font-bold text-lg shrink-0">C</div>
                            <div>
                                <h4 class="font-bold text-gray-800">Butt Kicks (Tumit ke Pantat)</h4>
                                <p class="text-xs text-gray-600 mt-1 leading-relaxed">
                                    Lari dengan melipat kaki ke belakang hingga tumit menyentuh bokong. Paha tetap tegak lurus ke bawah (tidak maju ke depan).
                                </p>
                                <div class="mt-2 bg-gray-50 px-3 py-2 rounded-lg border-l-4 border-red-400">
                                    <p class="text-[10px] text-gray-500 uppercase font-bold">üì¢ Instruksi Guru:</p>
                                    <p class="text-xs font-bold text-gray-800 italic">"Tendang pantatnya! Percepat frekuensinya!"</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 3. SETUP & MANAJEMEN KELAS -->
                <div class="grid grid-cols-1 gap-4">
                    <!-- Setup -->
                    <div class="bg-white p-5 rounded-2xl shadow-sm border border-gray-200">
                        <h3 class="font-bold text-orange-600 mb-3 border-b pb-2"><i class="fas fa-map-marked-alt mr-2"></i>Setup Lapangan</h3>
                        <ul class="text-sm text-gray-700 space-y-2 list-disc ml-4">
                            <li><strong>Lintasan Sprint:</strong> Pasang Cone A (Start) dan Cone B (Finish) jarak 30-50m. Pastikan area finish aman (tidak ada tembok).</li>
                            <li><strong>Zona Estafet:</strong> Beri tanda kapur sepanjang 20m (10m sebelum & 10m sesudah garis start pelari kedua).</li>
                        </ul>
                    </div>
                    
                    <!-- Tips Fun -->
                    <div class="bg-white p-5 rounded-2xl shadow-sm border border-gray-200">
                        <h3 class="font-bold text-purple-600 mb-3 border-b pb-2"><i class="fas fa-smile mr-2"></i>Tips Kelas Asyik</h3>
                        <ul class="text-sm text-gray-700 space-y-2 list-disc ml-4">
                            <li><strong>Game Based:</strong> Pemanasan pakai "Hijau-Hitam" atau "Polisi Maling".</li>
                            <li><strong>Musik:</strong> Putar lagu DJ/Upbeat saat lari jauh agar semangat.</li>
                            <li><strong>Kompetisi Tim:</strong> Bagi kelas jadi 4 tim besar, hitung poin juara estafet.</li>
                        </ul>
                    </div>
                </div>

                <!-- 4. PENDINGINAN (COOLING DOWN) -->
                <div class="bg-blue-50 p-5 rounded-2xl border border-blue-200">
                    <h3 class="font-bold text-blue-700 mb-2"><i class="fas fa-snowflake mr-2"></i>Protokol Pendinginan</h3>
                    <ul class="text-sm text-gray-700 space-y-1">
                        <li>1. Jalan kaki santai keliling lapangan (2 menit).</li>
                        <li>2. Stretching statis (tahan 8 hitungan) fokus otot betis & paha.</li>
                        <li>3. Duduk meluruskan kaki sambil digetarkan (shaking).</li>
                        <li>4. Tarik napas dalam dan buang perlahan.</li>
                    </ul>
                </div>

                <!-- 5. LIVE DATA SISWA -->
                <div class="bg-white p-6 rounded-3xl shadow-sm border border-gray-200">
                    <h3 class="font-bold text-green-600 mb-3 border-b pb-2 flex justify-between items-center">
                        <span><i class="fas fa-users mr-2"></i>Data Masuk (Hari Ini)</span>
                        <button onclick="clearData()" class="text-xs bg-red-100 text-red-600 px-3 py-1 rounded-full hover:bg-red-200 transition">Reset Data</button>
                    </h3>
                    <div class="overflow-x-auto max-h-60">
                        <table class="w-full text-sm text-left text-gray-500">
                            <thead class="text-xs text-gray-700 uppercase bg-gray-50 sticky top-0">
                                <tr>
                                    <th class="px-4 py-3 rounded-tl-lg">Nama</th>
                                    <th class="px-4 py-3">Kls</th>
                                    <th class="px-4 py-3 rounded-tr-lg">Absen</th>
                                </tr>
                            </thead>
                            <tbody id="student-data-body"></tbody>
                        </table>
                        <p id="no-data-msg" class="text-center text-xs p-6 text-gray-400">Belum ada siswa yang kirim tugas di HP ini.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- MODAL LOGIN GURU -->
        <div id="admin-modal" class="hidden fixed inset-0 bg-black/80 z-[60] flex items-center justify-center p-4 backdrop-blur-sm modal">
            <div class="bg-white rounded-3xl p-8 w-full max-w-sm modal-content relative overflow-hidden text-center shadow-2xl">
                <button onclick="closeAdminModal()" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600"><i class="fas fa-times text-xl"></i></button>
                <div class="bg-indigo-100 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4 text-indigo-600 text-3xl shadow-inner">
                    <i class="fas fa-user-shield"></i>
                </div>
                <h3 class="text-2xl font-bold text-gray-800 mb-1">Akses Guru</h3>
                <p class="text-sm text-gray-500 mb-6">Masukkan PIN Rahasia Pak Nanda</p>
                <input type="password" id="admin-pin" class="w-full text-center text-3xl tracking-[0.5em] font-bold border-b-2 border-gray-300 focus:border-indigo-600 outline-none py-3 mb-8 text-gray-800" maxlength="6" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                <button onclick="checkPin()" class="w-full bg-gradient-to-r from-indigo-600 to-blue-600 text-white font-bold py-4 rounded-xl hover:from-indigo-700 hover:to-blue-700 transition shadow-lg shadow-indigo-500/30 transform active:scale-95">Buka Dashboard</button>
            </div>
        </div>

        <!-- FOOTER -->
        <footer class="bg-white border-t border-gray-200 p-8 text-center pb-10">
            <div class="flex flex-col items-center justify-center gap-2">
                <p class="text-xs text-gray-400 font-semibold uppercase tracking-widest">PJOK Kurikulum Merdeka</p>
                <div class="text-xs text-gray-500 font-medium flex items-center gap-1 bg-gray-50 px-3 py-1 rounded-full border border-gray-100">
                    <span>Coded with ‚ö° by</span>
                    <a href="https://instagram.com/nxyxa.27" target="_blank" class="text-pink-600 hover:text-pink-800 font-bold flex items-center gap-1 transition-colors">
                        @NxyxA <i class="fab fa-instagram"></i>
                    </a>
                </div>
            </div>
        </footer>
    </div>

    <!-- LOGIKA JAVASCRIPT -->
    <script>
        // === DATA KONTEN UTAMA ===
        const contentData = {
            short: {
                title: "Sprint & Estafet üèÉüí®",
                video: "https://www.youtube.com/embed/SOq5HBOFwr4", 
                videoDesc: "Video ini menunjukkan teknik dasar lari sprint (jarak pendek) dan permainan estafet. Perhatikan bagaimana pelari menggunakan start jongkok dan cara mengoper tongkat di zona wissel.",
                safety: "Lakukan pemanasan hamstring (paha belakang) dengan serius agar tidak kram. Pastikan lintasan lari bersih dari batu/kerikil.",
                glossary: [
                    { term: "Start Jongkok", def: "Posisi start dengan lutut menyentuh tanah untuk tolakan maksimal (Sprint)." },
                    { term: "Visual Pass", def: "Teknik operan tongkat estafet dengan cara penerima melihat ke belakang." },
                    { term: "Wissel Zone", def: "Area sepanjang 20 meter dimana tongkat estafet wajib berpindah tangan." }
                ],
                points: [
                    "<strong>Start Jongkok:</strong> Gunakan untuk mendapatkan ledakan kecepatan awal.",
                    "<strong>Ayunan Tangan:</strong> Siku ditekuk 90 derajat, ayun kuat sejajar pinggang.",
                    "<strong>Tumpuan Kaki:</strong> Gunakan ujung telapak kaki (Ball of foot), jangan tumit.",
                    "<strong>Estafet:</strong> Fokus pada ketepatan pemberian tongkat, bukan hanya lari cepat."
                ],
                guide: `
                    <ol class="list-decimal ml-4 space-y-3 text-sm text-gray-700 leading-relaxed">
                        <li><strong>Bentuk Tim:</strong> Cari 3 temanmu (total 4 orang). Tentukan urutan lari.</li>
                        <li><strong>Persiapan Alat:</strong> Gunakan tongkat estafet (atau benda pengganti yang aman).</li>
                        <li><strong>Posisi:</strong> Pelari 1 di garis start (Jongkok). Pelari 2, 3, 4 di titik estafet (Berdiri).</li>
                        <li><strong>Mulai Lomba:</strong> Lakukan lomba estafet antar tim! Jangan sampai tongkat jatuh.</li>
                        <li><strong>Evaluasi:</strong> Tim mana yang operannya paling mulus?</li>
                    </ol>
                `,
                p5: [
                    { text: "Gotong Royong (Kompak saat operan tongkat)", icon: "fa-users" },
                    { text: "Integritas (Jujur tidak mencuri start)", icon: "fa-balance-scale" },
                    { text: "Mandiri (Percaya diri saat berlari)", icon: "fa-bolt" }
                ],
                quiz: [
                    { q: "Start yang digunakan dalam lari jarak pendek adalah...", opts: ["Start Berdiri", "Start Melayang", "Start Jongkok", "Start Bebas"], ans: 2, exp: "Start jongkok (Crouch Start) memberikan tolakan paling kuat." },
                    { q: "Pada aba-aba 'Siap', posisi pinggul sebaiknya...", opts: ["Lebih rendah dari bahu", "Lebih tinggi dari bahu", "Sejajar bahu", "Duduk di tumit"], ans: 1, exp: "Pinggul naik untuk memindahkan berat badan ke depan." },
                    { q: "Kunci keberhasilan tim estafet adalah...", opts: ["Kecepatan individu", "Teknik perpindahan tongkat", "Sepatu mahal", "Teriakan penonton"], ans: 1, exp: "Perpindahan tongkat yang mulus menghemat waktu paling banyak." },
                    { q: "Tumpuan kaki saat lari sprint adalah...", opts: ["Tumit", "Seluruh telapak", "Ujung kaki (Ball of foot)", "Sisi luar"], ans: 2, exp: "Ujung kaki mempercepat kontak dengan tanah." },
                    { q: "Saat finish, gerakan yang benar adalah...", opts: ["Melompat", "Berhenti mendadak", "Membusungkan dada", "Jalan santai"], ans: 2, exp: "Membusungkan dada membantu menyentuh pita finish lebih cepat." },
                    { q: "Kesalahan fatal saat start jongkok...", opts: ["Jari V terbalik", "Mencuri start (False Start)", "Pandangan bawah", "Pinggul naik"], ans: 1, exp: "Mencuri start akan didiskualifikasi." },
                    { q: "Sudut siku lengan saat lari...", opts: ["Lurus", "90 derajat", "45 derajat", "Bebas"], ans: 1, exp: "90 derajat adalah sudut paling efisien." },
                    { q: "Tongkat estafet diberikan di...", opts: ["Sembarang tempat", "Zona wissel (20m)", "Garis finish", "Start"], ans: 1, exp: "Wajib di zona pergantian (wissel)." },
                    { q: "Pandangan mata saat sprint...", opts: ["Bawah", "Lurus depan", "Kanan kiri", "Langit"], ans: 1, exp: "Lurus ke depan menjaga keseimbangan." },
                    { q: "Sprint melatih...", opts: ["Jantung", "Kecepatan (Speed)", "Kelenturan", "Keseimbangan"], ans: 1, exp: "Melatih kecepatan maksimal." }
                ]
            },
            middle: {
                title: "Jarak Menengah (800m) üî•",
                video: "https://www.youtube.com/embed/iUiJqn4AA7E", 
                videoDesc: "Materi ini membahas teknik lari 800 meter, mulai dari Start Berdiri, pentingnya mengatur irama (Pacing), hingga strategi 'Kick' di akhir lomba.",
                safety: "Jangan berhenti mendadak setelah lari kencang, teruslah berjalan agar darah tidak menumpuk di kaki (mencegah pusing).",
                glossary: [
                    { term: "Start Berdiri", def: "Posisi start dengan berdiri (satu kaki di depan), digunakan untuk lari >800m." },
                    { term: "Pacing", def: "Strategi mengatur kecepatan lari agar tenaga tidak habis di awal." },
                    { term: "Kick", def: "Akselerasi (sprint) penghabisan saat mendekati garis finish." }
                ],
                points: [
                    "<strong>Start Berdiri:</strong> Tidak perlu jongkok, cukup condongkan badan ke depan.",
                    "<strong>Pacing (Irama):</strong> Jangan sprint di awal! Simpan tenaga.",
                    "<strong>Posisi Badan:</strong> Lebih tegak dan rileks dibanding sprint.",
                    "<strong>Tikungan:</strong> Lari sedekat mungkin dengan garis dalam."
                ],
                guide: `
                    <ol class="list-decimal ml-4 space-y-3 text-sm text-gray-700 leading-relaxed">
                        <li><strong>Pemanasan:</strong> Jogging santai 2 putaran lapangan.</li>
                        <li><strong>Latihan Pacing:</strong> Lari dengan kecepatan sedang (konstan) selama 3 menit.</li>
                        <li><strong>Cek Napas:</strong> Usahakan napas berirama (hidung-mulut).</li>
                        <li><strong>Tantangan 800m:</strong> Lari 2 putaran penuh dengan kecepatan stabil. Dilarang berhenti!</li>
                    </ol>
                `,
                p5: [
                    { text: "Tangguh (Pantang menyerah saat lelah)", icon: "fa-dumbbell" },
                    { text: "Disiplin (Menjaga kecepatan stabil)", icon: "fa-clock" },
                    { text: "Bernalar Kritis (Mengatur strategi)", icon: "fa-brain" }
                ],
                quiz: [
                    { q: "Start untuk lari 800m adalah...", opts: ["Jongkok", "Melayang", "Berdiri", "Duduk"], ans: 2, exp: "Jarak menengah menggunakan start berdiri." },
                    { q: "Strategi utama lari 800m...", opts: ["Sprint awal", "Pacing (Irama)", "Lompat", "Kekuatan bahu"], ans: 1, exp: "Pacing menjaga stamina sampai akhir." },
                    { q: "Posisi tubuh lari menengah...", opts: ["Bungkuk", "Tegak/Condong wajar", "Miring", "Kaku"], ans: 1, exp: "Tegak memudahkan pernapasan." },
                    { q: "Lari di tikungan sebaiknya...", opts: ["Luar lintasan", "Mepet garis dalam", "Zig-zag", "Berhenti"], ans: 1, exp: "Mepet dalam meminimalkan jarak tempuh." },
                    { q: "Gerakan tangan...", opts: ["Kaku tinggi", "Rileks berirama", "Lurus bawah", "Atas kepala"], ans: 1, exp: "Rileks menghemat energi." },
                    { q: "Kapan melakukan sprint (kick)?", opts: ["Awal", "Tengah", "Jelang Finish", "Tidak perlu"], ans: 2, exp: "Jelang finish untuk menang." },
                    { q: "Tumpuan kaki...", opts: ["Tumit", "Mid-foot (Tengah)", "Sama saja", "Jinjit"], ans: 1, exp: "Mid-foot lebih efisien untuk jarak jauh." },
                    { q: "Energi lari 800m...", opts: ["Aerobik", "Anaerobik", "Campuran", "Surya"], ans: 2, exp: "Campuran kecepatan dan daya tahan." },
                    { q: "Posisi kaki start berdiri...", opts: ["Sejajar", "Satu kaki depan", "Silang", "Angkat satu"], ans: 1, exp: "Satu kaki di depan garis." },
                    { q: "Kesalahan pemula...", opts: ["Lambat", "Ngebut di awal", "Sepatu lari", "Minum"], ans: 1, exp: "Ngebut awal bikin cepat lelah." }
                ]
            },
            long: {
                title: "Jarak Jauh (Endurance) üîã",
                video: "https://www.youtube.com/embed/HjsA7LErfww", 
                videoDesc: "Analisis lari jarak jauh (maraton) yang menekankan pada efisiensi gerak, langkah pendek cepat (cadence), dan teknik pernapasan untuk menjaga stamina.",
                safety: "Jaga hidrasi (minum) sedikit demi sedikit. Jika napas terasa sesak atau dada sakit, segera kurangi kecepatan menjadi jalan kaki.",
                glossary: [
                    { term: "Endurance", def: "Daya tahan jantung dan paru-paru untuk aktivitas lama." },
                    { term: "Cadence", def: "Jumlah langkah kaki per menit. Semakin tinggi (langkah pendek cepat), semakin hemat energi." },
                    { term: "Mid-foot Strike", def: "Teknik mendaratkan kaki bagian tengah rata, bukan jinjit atau tumit." }
                ],
                points: [
                    "<strong>Efisien:</strong> Langkah pendek tapi frekuensi tinggi (Cadence).",
                    "<strong>Napas Ritmik:</strong> Pola 2 langkah tarik, 2 langkah buang.",
                    "<strong>Pendaratan:</strong> Mid-foot (tengah kaki) untuk meredam benturan.",
                    "<strong>Mentalitas:</strong> Tetap tenang dan rileks walau lelah."
                ],
                guide: `
                    <ol class="list-decimal ml-4 space-y-3 text-sm text-gray-700 leading-relaxed">
                        <li><strong>Tantangan Daya Tahan:</strong> Siapkan timer HP.</li>
                        <li><strong>Misi Utama:</strong> Jogging (lari pelan) selama 10-15 menit NON-STOP.</li>
                        <li><strong>Aturan Emas:</strong> Jika lelah, perlambat lari, tapi JANGAN JALAN KAKI.</li>
                        <li><strong>Pendinginan:</strong> Wajib jalan kaki 2 menit setelah selesai.</li>
                    </ol>
                `,
                p5: [
                    { text: "Beriman (Bersyukur tubuh sehat)", icon: "fa-pray" },
                    { text: "Mandiri (Memotivasi diri sendiri)", icon: "fa-heart" },
                    { text: "Kreatif (Menemukan ritme lari)", icon: "fa-lightbulb" }
                ],
                quiz: [
                    { q: "Pendaratan kaki aman...", opts: ["Jinjit", "Tumit", "Mid-foot", "Samping"], ans: 2, exp: "Mid-foot meredam benturan lutut." },
                    { q: "Pola napas disarankan...", opts: ["Tahan", "Pendek", "Ritmik", "Hidung saja"], ans: 2, exp: "Ritmik menjamin suplai oksigen." },
                    { q: "Posisi lengan...", opts: ["Tinggi", "Kaku", "Rendah Rileks", "Silang"], ans: 2, exp: "Rendah rileks agar bahu tidak tegang." },
                    { q: "Tujuan utama...", opts: ["Kecepatan", "Daya Tahan (Endurance)", "Power", "Kelincahan"], ans: 1, exp: "Endurance adalah kunci." },
                    { q: "Kenapa cooling down?", opts: ["Lapar", "Buang asam laktat", "Otot besar", "Gak guna"], ans: 1, exp: "Recovery dan mencegah pusing." },
                    { q: "Apa itu Cadence?", opts: ["Merek", "Langkah per menit", "Angin", "Jarak"], ans: 1, exp: "Langkah per menit." },
                    { q: "Jika kram perut...", opts: ["Stop", "Pelanin & atur napas", "Lari cepat", "Soda"], ans: 1, exp: "Pelanin dan atur napas dalam." },
                    { q: "Start 5000m...", opts: ["Jongkok", "Berdiri", "Melayang", "Duduk"], ans: 1, exp: "Start Berdiri." },
                    { q: "Cara minum...", opts: ["Tahan", "Saat haus", "Dikit tapi rutin", "Banyak"], ans: 2, exp: "Dikit-dikit cegah kembung." },
                    { q: "Alat vital...", opts: ["Topi", "Jam", "Sepatu lari", "Kacamata"], ans: 2, exp: "Sepatu mencegah cedera." }
                ]
            }
        };

        let currentTab = 'short';
        let currentScore = 0; 

        // --- NAVIGASI & RENDER KONTEN ---
        document.getElementById('identity-form').addEventListener('submit', function(e) {
            e.preventDefault();
            const name = document.getElementById('student-name').value;
            const number = document.getElementById('student-number').value;
            if(name && number){
                document.getElementById('identity-section').classList.add('hidden');
                document.getElementById('top-header').classList.add('hidden'); // Sembunyikan header besar
                const mainContent = document.getElementById('main-content');
                mainContent.classList.remove('hidden');
                mainContent.classList.add('fade-in', 'flex'); 
                renderContent('short');
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        });

        function switchTab(type) {
            currentTab = type;
            ['short', 'middle', 'long'].forEach(t => {
                const btn = document.getElementById(`tab-${t}`);
                if (t === type) {
                    btn.classList.add('tab-active', 'shadow-md', 'scale-105');
                    btn.classList.remove('tab-inactive', 'hover:bg-gray-50');
                } else {
                    btn.classList.add('tab-inactive', 'hover:bg-gray-50');
                    btn.classList.remove('tab-active', 'shadow-md', 'scale-105');
                }
            });
            const section = document.getElementById('material-section');
            section.classList.remove('fade-in');
            void section.offsetWidth; 
            section.classList.add('fade-in');
            renderContent(type);
        }

        function renderContent(type) {
            const data = contentData[type];
            currentScore = 0; 
            
            // Text
            document.getElementById('material-title').innerText = data.title;
            document.getElementById('video-embed').src = data.video;
            document.getElementById('video-desc').innerText = data.videoDesc;
            document.getElementById('safety-text').innerText = data.safety; // Update Safety Text
            
            // Glossary
            const glossaryContainer = document.getElementById('glossary-container');
            glossaryContainer.innerHTML = '';
            data.glossary.forEach(g => {
                glossaryContainer.innerHTML += `
                    <div class="bg-gray-50 p-3 rounded-xl border border-gray-100 hover:border-purple-200 transition">
                        <span class="font-bold text-indigo-600 block text-xs uppercase mb-1">${g.term}</span>
                        <span class="text-gray-600 leading-tight">${g.def}</span>
                    </div>`;
            });

            // Points
            const pointsList = document.getElementById('key-points');
            pointsList.innerHTML = '';
            data.points.forEach(p => pointsList.innerHTML += `<li class="text-sm text-gray-700 leading-relaxed flex items-start gap-2"><i class="fas fa-check-circle text-green-500 mt-1 shrink-0"></i> <span>${p}</span></li>`);
            
            document.getElementById('practice-guide-content').innerHTML = data.guide;
            document.getElementById('input-cerita').value = ''; 
            document.getElementById('input-refleksi').value = ''; 

            // P5
            const p5Container = document.getElementById('p5-checklist-container');
            p5Container.innerHTML = '';
            data.p5.forEach(item => {
                p5Container.innerHTML += `
                    <label class="flex items-center space-x-3 cursor-pointer bg-white p-4 rounded-2xl border-2 border-transparent hover:border-blue-400 hover:shadow-lg transition-all group shadow-sm">
                        <div class="relative">
                            <input type="checkbox" class="peer sr-only">
                            <div class="w-6 h-6 border-2 border-gray-300 rounded-lg peer-checked:bg-blue-500 peer-checked:border-blue-500 transition-all flex items-center justify-center"><i class="fas fa-check text-white text-xs opacity-0 peer-checked:opacity-100"></i></div>
                        </div>
                        <div class="flex items-center gap-3 text-sm text-gray-700 font-bold group-hover:text-blue-600">
                            <div class="w-8 h-8 rounded-full bg-indigo-50 flex items-center justify-center text-indigo-500 shrink-0"><i class="fas ${item.icon}"></i></div>
                            <span>${item.text}</span>
                        </div>
                    </label>`;
            });

            // Quiz
            const quizContainer = document.getElementById('quiz-container');
            quizContainer.innerHTML = '';
            data.quiz.forEach((q, idx) => {
                let optsHtml = '';
                q.opts.forEach((opt, optIdx) => {
                    optsHtml += `<button onclick="checkAnswer(this, ${idx}, ${optIdx}, ${q.ans}, '${q.exp}')" class="quiz-btn-${idx} w-full text-left p-4 rounded-2xl border-2 border-transparent bg-white shadow-sm hover:border-blue-200 hover:bg-blue-50 transition-all text-sm mb-2 relative group font-medium text-gray-600"><span class="font-bold text-gray-400 mr-2 group-hover:text-blue-500 bg-gray-100 w-6 h-6 inline-flex items-center justify-center rounded-lg text-xs">${String.fromCharCode(65+optIdx)}</span> ${opt}</button>`;
                });
                quizContainer.innerHTML += `
                    <div class="bg-white p-6 rounded-3xl shadow-sm border border-gray-100 relative overflow-hidden group hover:shadow-md transition-all">
                        <div class="absolute top-0 right-0 bg-blue-100 text-blue-600 text-[10px] px-3 py-1 rounded-bl-2xl font-bold uppercase tracking-wider">Soal ${idx+1}</div>
                        <p class="font-bold text-gray-800 text-sm mb-4 pr-6 leading-relaxed">${q.q}</p>
                        <div class="mb-1 flex flex-col gap-1">${optsHtml}</div>
                        <div id="feedback-${idx}" class="hidden text-xs p-4 rounded-xl mt-2 bg-gray-50 border border-gray-200 animate-pulse font-medium"></div>
                    </div>`;
            });
        }

        // Quiz Logic
        function checkAnswer(btn, qIndex, selectedIdx, correctIdx, explanation) {
            if (btn.classList.contains('cursor-not-allowed')) return;
            const feedbackEl = document.getElementById(`feedback-${qIndex}`);
            const allBtns = document.querySelectorAll(`.quiz-btn-${qIndex}`);
            allBtns.forEach(b => { 
                b.disabled = true; 
                b.classList.add('opacity-50', 'cursor-not-allowed'); 
                b.classList.remove('hover:bg-blue-50', 'hover:shadow-md', 'hover:border-blue-200');
            });
            feedbackEl.classList.remove('animate-pulse');
            
            if (selectedIdx === correctIdx) {
                btn.classList.remove('opacity-50', 'bg-white');
                btn.classList.add('bg-green-100', 'border-green-500', 'text-green-800', 'font-bold');
                feedbackEl.innerHTML = `<span class="text-green-600 font-bold text-sm block mb-1"><i class="fas fa-check-circle"></i> Mantul! Benar banget.</span> ${explanation}`;
                feedbackEl.classList.add('bg-green-50', 'border-green-200');
                currentScore += 10; 
            } else {
                btn.classList.remove('opacity-50', 'bg-white');
                btn.classList.add('bg-red-100', 'border-red-500', 'text-red-800');
                allBtns[correctIdx].classList.remove('opacity-50', 'bg-white');
                allBtns[correctIdx].classList.add('bg-green-100', 'border-green-500', 'text-green-800', 'font-bold');
                feedbackEl.innerHTML = `<span class="text-red-500 font-bold text-sm block mb-1"><i class="fas fa-times-circle"></i> Ups, kurang tepat.</span> ${explanation}`;
                feedbackEl.classList.add('bg-red-50', 'border-red-200');
            }
            feedbackEl.classList.remove('hidden');
        }

        // --- DASHBOARD LOGIC ---
        function openAdminModal() { document.getElementById('admin-modal').classList.remove('hidden'); document.getElementById('admin-pin').focus(); }
        function closeAdminModal() { document.getElementById('admin-modal').classList.add('hidden'); document.getElementById('admin-pin').value = ''; }
        function checkPin() { 
            if (document.getElementById('admin-pin').value === "270302") { 
                closeAdminModal(); 
                document.getElementById('teacher-dashboard').classList.remove('hidden'); 
                loadStudentData(); 
            } else { 
                alert("PIN Salah! Coba lagi Pak."); 
            } 
        }
        function closeDashboard() { document.getElementById('teacher-dashboard').classList.add('hidden'); }
        function toggleAnswer(id) { 
            const el = document.getElementById(id); 
            if (el.classList.contains('hidden')) { el.classList.remove('hidden'); } else { el.classList.add('hidden'); } 
        }

        // --- SUBMIT & DATA ---
        function submitLKPD() {
            const nomorGuru = "6285709808532"; 
            const nama = document.getElementById('student-name').value;
            const kelas = document.getElementById('student-class').value;
            const absen = document.getElementById('student-number').value;
            const cerita = document.getElementById('input-cerita').value || "Belum ada cerita seru nih.";
            const refleksi = document.getElementById('input-refleksi').value || "-";
            
            let p5Checked = [];
            document.querySelectorAll('#p5-checklist-container input:checked').forEach(cb => { 
                p5Checked.push("‚≠ê " + cb.parentNode.querySelector('span').innerText); 
            });
            const p5Text = p5Checked.length ? p5Checked.join("%0A") : "-";

            // Local Storage
            const studentEntry = { nama, kelas, absen, materi: contentData[currentTab].title, timestamp: new Date().toISOString() };
            let existingData = JSON.parse(localStorage.getItem('pjokData')) || [];
            existingData.push(studentEntry);
            localStorage.setItem('pjokData', JSON.stringify(existingData));

            // WA Message
            let pesan = `*LAPORAN MISI PJOK üöÄ*%0A`;
            pesan += `Materi: ${contentData[currentTab].title.toUpperCase()}%0A`;
            pesan += `----------------------------------%0A`;
            pesan += `üòé *Agent:* ${nama}%0A`;
            pesan += `üè´ *Base:* ${kelas} / No. ${absen}%0A`;
            pesan += `----------------------------------%0A`;
            pesan += `üì¢ *STORY LAPANGAN:*%0A_"${cerita}"_%0A%0A`;
            pesan += `üí≠ *REFLEKSI DIRI:*%0A_"${refleksi}"_%0A%0A`;
            pesan += `üíØ *SKOR QUIZ: ${currentScore} / 100*%0A`;
            pesan += `üÜô *LEVEL UP KARAKTER:*%0A${p5Text}%0A`;
            pesan += `----------------------------------%0A_Dikirim via App PJOK Pak Nanda_`;

            if(confirm(`Yakin udah selesai semua misinya? Kirim laporan ke Pak Nanda sekarang?`)) { 
                window.open(`https://wa.me/${nomorGuru}?text=${pesan}`, '_blank'); 
            }
        }

        function loadStudentData() {
            const data = JSON.parse(localStorage.getItem('pjokData')) || [];
            const tbody = document.getElementById('student-data-body');
            const noDataMsg = document.getElementById('no-data-msg');
            tbody.innerHTML = '';
            
            if (data.length > 0) {
                noDataMsg.classList.add('hidden');
                data.reverse().forEach(student => {
                    const time = new Date(student.timestamp).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
                    tbody.innerHTML += `
                        <tr class="bg-white border-b hover:bg-gray-50 transition">
                            <td class="px-4 py-3 font-medium text-gray-900 whitespace-nowrap">
                                ${student.nama} <br><span class="text-[10px] text-gray-400 font-normal">${time}</span>
                            </td>
                            <td class="px-4 py-3">${student.kelas}</td>
                            <td class="px-4 py-3 text-center">${student.absen}</td>
                        </tr>`;
                });
            } else { noDataMsg.classList.remove('hidden'); }
        }

        function clearData() { 
            if(confirm("Hapus semua data siswa di perangkat ini? (Data di WA aman)")) { 
                localStorage.removeItem('pjokData'); 
                loadStudentData(); 
            } 
        }
    </script>
</body>
</html>


